.\" This file is generated from contrib/man/findref.1.erb. Run `rake erb` to refresh.
.TH FINDREF 1 "December 2025" "findref 1.4.3" "User Commands"
.SH NAME
findref \- recursively search directories with RE2 regular expressions
.SH SYNOPSIS
.B findref
[\fIoptions\fR] \fImatch_regex\fR [\fIstart_dir\fR] [\fIfilename_regex\fR]
.SH DESCRIPTION
.PP
.B findref
scans text files beneath the specified directory (the current working directory by default),
tests each line against a user supplied RE2 regular expression, and prints colorized matches in a
format similar to
.BR grep (1).
It is optimized for source trees: hidden files are skipped unless requested, generated artifacts and
package managers' lockfiles are pruned automatically, binary files are detected by null bytes, and
multiple worker goroutines keep I/O busy on multicore hosts.
.PP
The command ships with optional filename filtering, match statistics, and shell completion helpers
for Bash, Zsh, and Fish (see
.BR FILES ).
.SH ARGUMENTS
.TP
.I match_regex
Required RE2 regular expression evaluated against each line. The matcher is "smart case" by default:
if the pattern contains only lowercase letters it runs case insensitive; any uppercase character
forces a case sensitive match. Override with
.BR --ignore-case
or
.BR --match-case .
.TP
.I start_dir
Optional directory to walk recursively. Defaults to
.IR . .
.TP
.I filename_regex
Optional RE2 expression applied to each absolute file path before it is scanned. The default is
.BR ".*" ,
which accepts every file that clears the other filters.
.SH OPTIONS
.TP
.BR -a ", " --all
Aggressive search mode. Implies
.BR --ignore-case
and
.BR --hidden ,
and disables the built-in exclude list so that every directory is visited unless an explicit
.BR --exclude
still filters it.
.TP
.BR -d ", " --debug
Verbose logging that prints traversal decisions, exclude matches, and worker activity.
.TP
.BR -e ", " --exclude " " \fIvalue\fR
Skip files or directories whose cleaned path or basename matches
.IR value .
Provide the flag multiple times to stack rules. Default excludes remain active unless
.BR --all
is set.
.TP
.BR -f ", " --filename-only
Suppress individual matches and emit a sorted, deduplicated list of filenames that contained at least
one hit.
.TP
.BR -h ", " --hidden
Process hidden files and directories (paths that contain a component beginning with '.').
.TP
.BR -i ", " --ignore-case
Force case-insensitive matching regardless of the pattern contents.
.TP
.BR -m ", " --match-case
Force case-sensitive matching even if the pattern is all lowercase.
.TP
.BR -n ", " --no-color
Disable ANSI colors; useful for CI logs or when piping to tools that do not understand escape codes.
.TP
.BR -l ", " --max-line-length " " \fIchars\fR
Limit match output to lines shorter than
.IR chars
(default 2000). Longer lines are clipped to a 40-character context window and accounted for in the
"Skipped Long" statistic when
.BR --stats
is enabled.
.TP
.BR -x ", " --no-max-line-length
Remove any line-length guard and print matches in full. This cannot be combined with
.BR --max-line-length .
.TP
.BR -s ", " --stats
Track execution metrics and print them after the search: elapsed time, lines scanned, files scanned,
matches found, skipped-long lines, skipped-null files, and files that triggered scanner errors.
.TP
.BR -v ", " --version
Print the currently embedded version string and exit.
.TP
.BR --debug
Alias of
.BR -d .
.TP
.BR --hidden
Alias of
.BR -h .
.TP
.BR --no-color
Alias of
.BR -n .
.TP
.BR --filename-only
Alias of
.BR -f .
.TP
.BR --stats
Alias of
.BR -s .
.TP
.BR --max-line-length
Alias of
.BR -l .
.TP
.BR --no-max-line-length
Alias of
.BR -x .
.TP
.BR --match-case
Alias of
.BR -m .
.TP
.BR --ignore-case
Alias of
.BR -i .
.TP
.BR --help
Print the usage banner and exit.
.TP
.BR --
Explicitly mark the end of options. Required when the pattern itself begins with
.BR - .
.SH DEFAULT BEHAVIOR
.TP
.B Hidden files
Paths that match the built-in regular expression
.BR "(^|/)\." 
are ignored unless
.BR --hidden
or
.BR --all
is supplied.
.TP
.B Default excludes
To keep searches snappy,
.B findref
prunes directories and files commonly generated by build systems:
.PP
.RS
.nf
.git, .svn, .hg, .bzr, CVS, vendor, node_modules, build, dist, out,
coverage, package-lock.json, yarn.lock, pnpm-lock.yaml, bun.lockb,
composer.lock, Gemfile.lock, mix.lock, Cargo.lock, Pipfile.lock,
poetry.lock, Podfile.lock, go.sum, gradle.lockfile
.fi
.RE
.PP
Use
.BR --exclude
to add entries or
.BR --all
to disable this list entirely.
.TP
.B Binary detection
Files that emit any NUL byte are considered binary and are skipped after the first such line; when
statistics are enabled they increment the "Skipped Null" counter.
.TP
.B Concurrency
Once the directory walk finishes, every discovered file is queued to a pool of workers sized to the
number of available CPU cores so matching and I/O can overlap.
.TP
.B Output format
Matches mimic
.BR grep (1)
(``path:line_number:line text``) with the path in purple, the line number in green, and the match
highlighted in red. Colors can be disabled with
.BR --no-color .
.SH EXAMPLES
.TP
.B findref getMethodName
Search recursively from the current directory for the literal string "getMethodName" using smart-case
matching.
.TP
.B findref --ignore-case 'exec\\(' src/
Scan
.I src/
for case-insensitive matches of the regex
.BR exec\( .
.TP
.B findref --hidden "hi(1|2)" ~/project ".*\\.[hc](pp)?"
Allow hidden files, restrict file paths to C and C++ sources, and match either "hi1" or "hi2".
.TP
.B findref --stats --exclude node_modules "TODO" ./app
Skip
.I node_modules
while reporting aggregate statistics for TODO comments beneath
.IR ./app .
.TP
.B findref --filename-only --no-color "^func init" .
List only the files that declare a Go initializer while keeping the output parseable for scripts.
.SH EXIT STATUS
.PP
The exit status is 0 on success and non-zero on invalid input or other fatal errors discovered before
the scan begins. Encountering unreadable files does not change the exit code; they are reported on
stderr and counted in the statistics when requested.
.SH FILES
.TP
.B contrib/man/findref.1
Canonical source of this manual page.
.TP
.B contrib/completions/findref.{bash,zsh,fish}
Shell completion helpers that expose the CLI flags, exclude presets, and positional hints.
.SH SEE ALSO
.BR grep (1),
.BR git-grep (1),
.BR rg (1),
.BR ag (1)
